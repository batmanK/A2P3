<!DOCTYPE html>
<html>
<body>
  <script type="text/javascript"    src="jquery-1.8.3.js"></script>
<!--  <script type="text/javascript"    src="setup/enroll.js"></script> -->
<div class='title'>A2P3 Setup Enroll</div>
<hr>
<div id="error"></div>

<div id="profile">
  <form id="profileForm">
    <dt>Email Resource Server</dt><dd><label for="email_input" id="email">Email</label> 
      </dd>
    <dt>People Resource Server</dt><dd><label for="name_input">Name</label> 
      <input type="text" name="name" value="" id="name_input"></dd>
    <dt></dt><dd><label for="address1_input">Address1</label> 
      <input type="text" name="address1" value="" id="address1_input"></dd>
    <dt></dt><dd><label for="address2_input">Address2</label> 
      <input type="text" name="address2" value="" id="address2_input"></dd>
    <dt></dt><dd><label for="city_input">City</label> 
      <input type="text" name="city" value="" id="city_input"></dd>
    <dt></dt><dd><label for="province_input">Province</label> 
      <input type="text" name="province" value="" id="province_input"></dd>
    <dt></dt><dd><label for="postal_input">Postal</label> 
      <input type="text" name="postal" value="" id="postal_input"></dd>
    <dt></dt><img src="https://secure.gravatar.com/avatar/918b627daf7d848cd40770ed6cd15233" alt="" width="48" height="48" id="photo"></dd>  
    <dt>Social Insurance Resource Server</dt><dd><label for="si_input">SIN</label> 
      <input type="text" name="si" value="" id="si_input"></dd>
    <dt>Health Resource Server</dt><dd><label for="si_input">Health Number</label> 
      <input type="text" name="prov_number" value="" id="prov_number_input"></dd>
  </form>
</div>

<script>
  function onReady() {
    debugger;
    var url = 'http://setup.local.a2p3.net:8080/enroll/profile' // TBD, construct host from current document URL
    $.post( url, null, function ( data, status ) {
      if (status == 'success') {
        Object.keys(data).forEach( function (key) {
          $('#'+key+'_input').val( data[key] )
        })
        $('#email').text( data.email )
        $('#photo').attr('src', data.photo )
      }
    })

  }
  $(document).ready(onReady)
</script>

</body>
</html>